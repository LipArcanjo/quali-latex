\en

\section{Final Remarks}

We have completed Phase 1 of our research, during which we developed our proposed tool and evaluated it using the BigCloneBench dataset and through empirical analyses. The results indicate our tool can identify code clone duplications within the Linux kernel.

As the next step, we plan to conduct an ethnographic study as outlined in Section \ref{sec:meteth}. To preliminarily assess the potential impact of this research, we applied our systematic approach for mitigating code duplication to two pairs of functions. Table \ref{tab:patch} presents the initial results obtained from this process.

\input{conteudo/preliminar/table_patch}

In the first function pair, completing the refactoring requires the expertise of a maintainer for the AMD Display driver. This observation is because duplicated code artifacts involve copy-pasted code that imports different configuration files. The design of the AMD Display driver configuration files necessitates importing specific configurations at compile time, which prevents a generic approach. Consequently, refactoring this pair requires changes in how the AMD Display driver manages configuration files -- a complex task that demands input from an expert or maintainer.

The refactoring of the second function pair, however, was successful. 
We submitted this refactoring as a patch to the AMD Display driver to obtain feedback 
from the maintainers. 

The process of sending the patch was more time consuming then the expected . We 
initially submitted the patch on August 9th, 2024, but did not receive any 
replies. As a result, we had to resend it on October 9th, 2024, and finally 
received an initial response on 
November 3rd, 2024. 
While talking to our point of contact for the AMD Display driver, we discovered 
new information about the driver's processes. Some of the code in the driver is 
shared across all operating systems that support the implemented GPUs. This creates 
a challenging process within AMD to format and submit changes across the supported 
systems while simultaneously applying measures to mitigate errors.
Additionally, we discovered that duplicated code isn’t seen as negatively by AMD 
display driver developers as it is in the literature. One example shared with us 
is that duplicated code makes GPU driver code more independent, letting developers 
make changes to a GPU without worrying about testing compatibility with other GPUs, 
which helps save a lot of time and effort.

Regarding the patch content, only minor changes were requested to align with code 
style and best practices that were initially unknown to us. More details of the 
patch can be found in Appendix \ref{app:feedback}.

\input{conteudo/preliminar/cronograma}

Finally, as indicated in our proposed schedule in Table \ref{fig:cronograma}, 
our upcoming tasks include conducting the complete ethnographic study.
This step will start with completing our systematic approach to code 
duplication mitigation. Once we have finalized the mitigations, we intend 
to submit them to the AMD Display driver mailing list to gather insights 
and feedback from the maintainers regarding the changes we implemented.

Our upcoming tasks also include implementing improvements to our proposed tool. 
While the tool’s current state allowed us to conduct the experiments described in 
Chapter \ref{cha:method},
it is not yet adequately user-friendly or manageable for external users. 
To achieve our complementary goal of providing a solution for code duplication 
in the kernel, we plan to improve the documentation, refine the code structure, 
and address any issues we encounter along the way, providing the Linux community 
with a way to tackle the issue.
